# Example

## Table of Contents

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Combine one or multiple `requirements.yaml` files into a single `environment.yaml` file](#combine-one-or-multiple-requirementsyaml-files-into-a-single-environmentyaml-file)
- [Install a `requirements.yaml` file directly with `pip`](#install-a-requirementsyaml-file-directly-with-pip)
- [Install a `requirements.yaml` file directly with `unidep`](#install-a-requirementsyaml-file-directly-with-unidep)
- [Create a global `conda-lock.yml` and per project `conda-lock.yml` files](#create-a-global-conda-lockyml-and-per-project-conda-lockyml-files)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## Combine one or multiple `requirements.yaml` files into a single `environment.yaml` file

Combine `requirements.yaml` files in subdirectories and into an `environment.yaml` file that can be installed with `conda`.

Here we can just run `unidep merge` with no arguments, since the defaults are the same as what we want.

This would be the same as running `unidep merge --name myenv --verbose`:

<!-- CODE:BASH:START -->
<!-- echo '```bash' -->
<!-- unidep merge --name myenv --verbose -->
<!-- echo '```' -->
<!-- CODE:END -->
<!-- OUTPUT:START -->
<!-- âš ï¸ This content is auto-generated by `markdown-code-runner`. -->
```bash
ğŸ” Scanning in `.` at depth 0
ğŸ” Scanning in `project1` at depth 1
ğŸ” Found `requirements.yaml` at `project1/requirements.yaml`
ğŸ” Scanning in `project3` at depth 1
ğŸ” Found `requirements.yaml` at `project3/requirements.yaml`
ğŸ” Scanning in `project2` at depth 1
ğŸ” Found `requirements.yaml` at `project2/requirements.yaml`
ğŸ“„ Parsing `project1/requirements.yaml`
ğŸ“„ Parsing include `../project2`
ğŸ“„ Parsing `project2/requirements.yaml`
ğŸ“„ Parsing include `../project3`
ğŸ“„ Parsing `project3/requirements.yaml`
ğŸ“ Generating environment file at `environment.yaml`
ğŸ“ Environment file generated successfully.
âœ… Generated environment file at `environment.yaml` from `project1/requirements.yaml`, `project2/requirements.yaml`, `project3/requirements.yaml`
```

<!-- OUTPUT:END -->

See the resulting [`environment.yaml`](environment.yaml) file.

## Install a `requirements.yaml` file directly with `pip`

Install a `requirements.yaml` file directly with pip, which installs only the pip installable packages.

Just run `pip install ./project1/`.

Because `unidep` is in the `[build-system]` section of [the `pyproject.toml` file](example/project1/pyproject.toml), it will be installed automatically.

## Install a `requirements.yaml` file directly with `unidep`

Install a `requirements.yaml` file directly with `unidep`, which first installs the conda installable packages, then the Pip installable packages, and finally the local package itself.

Just run `unidep install ./project1` or `unidep install -e ./project1` for an editable install.

<!-- CODE:BASH:START -->
<!-- echo '```bash' -->
<!-- unidep install --dry-run -e ./project1 -->
<!-- echo '```' -->
<!-- CODE:END -->
<!-- OUTPUT:START -->
<!-- âš ï¸ This content is auto-generated by `markdown-code-runner`. -->
```bash
ğŸ“¦ Installing conda dependencies with `conda install --yes --override-channels --channel conda-forge pandas adaptive">=1.0.0, <2.0.0" pfapack pipefunc`

ğŸ“¦ Installing pip dependencies with `/opt/hostedtoolcache/Python/3.12.0/x64/bin/python -m pip install yaml2bib; sys_platform == 'linux' and platform_machine == 'x86_64' rsync-time-machine slurm-usage fileup; sys_platform == 'darwin' codestructure aiokef markdown-code-runner home-assistant-streamdeck-yaml`

ğŸ“ Found local dependencies: {'project1': ['project2', 'project3']}

ğŸ“¦ Installing project with `/opt/hostedtoolcache/Python/3.12.0/x64/bin/python -m pip install -e /home/runner/work/unidep/unidep/example/project2 -e /home/runner/work/unidep/unidep/example/project3 -e ./project1`

```

<!-- OUTPUT:END -->

## Create a global `conda-lock.yml` and per project `conda-lock.yml` files

Using `unidep conda-lock` we can create a global `conda-lock.yml` file and per project `conda-lock.yml` files that are consistent with the global lock file.

<!-- CODE:BASH:START -->
<!-- echo '```bash' -->
<!-- unidep conda-lock --check-input-hash -->
<!-- echo '```' -->
<!-- CODE:END -->
<!-- OUTPUT:START -->
<!-- âš ï¸ This content is auto-generated by `markdown-code-runner`. -->
```bash
âœ… Generated environment file at `tmp.environment.yaml` from `project1/requirements.yaml`, `project2/requirements.yaml`, `project3/requirements.yaml`
```

<!-- OUTPUT:END -->
